<%- include('../partials/header') %>
<body class="loaded">
  <section>
    <div class="main-section">
      <nav>
        <div class="heading">
          <!-- Main heading for the page -->
          <h1>Edit Routine</h1>
        </div>
        <div class="nav-wrapper">
          <ul>
            <!-- Link to go back to routines -->
            <li><a href="/routines" class="button">back</a></li>
          </ul>
        </div>
      </nav>
    </div>
  </section>
  <!-- Secondary heading for the edit form -->
  <h1 class="title-size">Edit Routine</h1>

  <!-- Form to edit an existing routine -->
  <form class="edit-form" action="/routines/<%= routine._id %>?_method=PUT" method="POST">
    <input type="hidden" name="_method" value="PUT">
    <div>
      <label for="name">Name:</label>
      <input type="text" id="name" name="name" value="<%= routine.name %>" required>
    </div>
    <div>
      <label for="sets">Sets:</label>
      <input type="number" id="sets" name="sets" value="<%= routine.sets %>" required>
    </div>
    <div>
      <label for="reps">Reps:</label>
      <input type="text" id="reps" name="reps" value="<%= routine.reps %>" pattern="^\d+(\-\d+)?$" required>
    </div>
    <div>
      <label for="workouts">Select Workouts:</label>
      <!-- Loop through workouts to display checkboxes -->
      <% workouts.forEach(workout => { %>
        <input type="checkbox" name="workouts" value="<%= workout._id %>"
          <% if (routine.workouts.includes(workout._id)) { %> checked <% } %>>
        <span><%= workout.name %></span><br>
      <% }); %>
    </div>
    <!-- Button to submit the form and update the routine -->
    <button class="btn-2" type="submit">Update</button>
  </form>
</body>
</html>
